import time

var timestamp = 1691656611
ptr<libc_tm_t> ti = localtime(&timestamp)

// 修改成 strings.new() -- 基于重载解析多种类型的 new
string tz = libc_string_new(ti.tm_zone)

// 51 36 8 10 7 123 4 221 0 0 UTC
println(ti.tm_sec, ti.tm_min, ti.tm_hour, ti.tm_mday, ti.tm_mon, ti.tm_year, ti.tm_wday, ti.tm_yday, ti.tm_isdst, ti.tm_gmtoff, tz)

var tp = libc_tm_t {
    tm_year = 122,
    tm_mon = 7,
    tm_mday = 9,
    tm_hour = 17,
    tm_min = 30,
    tm_sec = 52
}

// 1660066252
timestamp = mktime(&tp)
println('timestamp:', timestamp)

// format 测试(需要一个 100 空间的 buf)
var buf = [] as [u8;100]
strftime(buf.raw(), buf.len(), '%Y-%m-%d %H:%M:%S'.raw(), &tp)
println('datetime:', buf as string)

// time 库测试
var t = time.now()
println(t.timestamp() > 1691665760)