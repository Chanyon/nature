import syscall

var fd = syscall.open('mock/notfound.txt', syscall.O_RDONLY, 0666) catch err {
    print('open mock/notfound.txt failed: ', err.msg, '\n')
    continue -1
}

if fd != -1 {
    println('open mock/notfound.txt successful')
}

fd = syscall.open('mock/open.txt', syscall.O_RDONLY | syscall.O_CREAT, 0666) catch err {
    return print('open mock/open.txt failed: ', err.msg, '\n')
    // fd default is zero
}

if fd != 0 {
    println('open mock/open.txt successful')
}

// read buf is [u8]
var buf = vec<u8>{len=20}
var len = syscall.read(fd, buf) catch err {
    return print(err.msg)
}

print('actual read len: ', len, '\n')
var str =  buf as string
print('buf as string: ', str, '\n')